{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hp/OneDrive/Desktop/tasks/task8/app/verify/page.tsx"],"sourcesContent":["'use client';\r\nimport React, { use, useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useRouter,useSearchParams } from 'next/navigation';\r\nimport axios from 'axios';\r\nimport Link from 'next/link';\r\n\r\ntype OTPData = {\r\n  otp: string;\r\n};\r\n\r\nfunction VerifyEmail() {\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm<OTPData>();\r\n  const router = useRouter();\r\n  const sea=useSearchParams();\r\n  const email=sea.get('email');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [resending, setResending] = useState(false);\r\n  const [timer, setTimer] = useState(30);\r\n\r\n \r\n\r\n  // Timer countdown\r\n  useEffect(() => {\r\n    let interval: NodeJS.Timeout;\r\n    if (timer > 0) {\r\n      interval = setInterval(() => setTimer((prev) => prev - 1), 1000);\r\n    }\r\n    return () => clearInterval(interval);\r\n  }, [timer]);\r\n\r\n  const onSubmit = async (data: OTPData) => {\r\n    setError('');\r\n    setSuccess('');\r\n    setLoading(true);\r\n    try {\r\n      await axios.post('https://akil-backend.onrender.com/verify-email', {\r\n        email,\r\n        OTP: data.otp,\r\n      });\r\n      setSuccess('Email verified successfully!');\r\n      setTimeout(() => {\r\n        router.push('/');\r\n      }, 1500);\r\n    } catch (err: any) {\r\n      setError(err.response?.data?.message || 'Verification failed');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleResendOTP = async () => {\r\n    if (!email) {\r\n      setError('Email is missing.');\r\n      return;\r\n    }\r\n\r\n    setError('');\r\n    setSuccess('');\r\n    setResending(true);\r\n    try {\r\n      await axios.post('https://akil-backend.onrender.com/resend-otp', { email });\r\n      setSuccess('A new OTP has been sent to your email.');\r\n      setTimer(30);\r\n    } catch (err: any) {\r\n      setError(err.response?.data?.message || 'Failed to resend OTP.');\r\n    } finally {\r\n      setResending(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col justify-center items-center min-h-screen bg-white\">\r\n      <p className=\"font-Poppins text-[#25324B] font-[900] text-[32px] mb-4\">\r\n        Verify Your Email\r\n      </p>\r\n      <p className=\"text-sm text-gray-500 mb-4\">OTP sent to <strong>{email}</strong></p>\r\n      {error && <p className=\"text-red-500 mb-4\">{error}</p>}\r\n      {success && <p className=\"text-green-500 mb-4\">{success}</p>}\r\n      <div className=\"w-full max-w-md p-6\">\r\n        <form className=\"text-[#515B6F]\" onSubmit={handleSubmit(onSubmit)}>\r\n          <div className=\"mb-6\">\r\n            <label htmlFor=\"otp\" className=\"block font-Epilogue font-[600] text-[16px] leading-[1.6] mb-1\">\r\n              OTP (4 digits)\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"otp\"\r\n              placeholder=\"Enter 4-digit OTP\"\r\n              maxLength={4}\r\n              className=\"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              {...register('otp', {\r\n                required: 'Please enter your OTP',\r\n                pattern: {\r\n                  value: /^\\d{4}$/,\r\n                  message: 'OTP must be a 4-digit number',\r\n                },\r\n              })}\r\n            />\r\n            {errors.otp && <p className=\"text-red-500 text-sm mt-1\">{errors.otp.message}</p>}\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"w-full bg-[#0d0990] rounded-[80px] text-white py-[15px] px-[24px] hover:bg-[rgb(13,9,144)] transition-colors disabled:bg-[#0d0990]/50\"\r\n          >\r\n            {loading ? 'Verifying...' : 'Verify Email'}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"py-4\">\r\n          <p className=\"font-Epilogue text-[14px] text-[#202430] text-center\">\r\n            Didn't receive the code?{' '}\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleResendOTP}\r\n              disabled={resending || timer > 0}\r\n              className=\"text-[#4640DE] font-semibold underline ml-1\"\r\n            >\r\n              {resending\r\n                ? 'Sending...'\r\n                : timer > 0\r\n                ? `Resend in ${timer}s`\r\n                : 'Resend OTP'}\r\n            </button>\r\n          </p>\r\n        </div>\r\n\r\n        <p className=\"text-center mt-4 font-Epilogue text-[14px] text-[#202430]\">\r\n          Back to{' '}\r\n          <Link href=\"/SignUp\" className=\"text-[#4640DE] font-semibold underline\">\r\n            Sign Up\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VerifyEmail;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}